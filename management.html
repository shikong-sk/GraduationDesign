<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title></title>
		<script src="Assets/js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="Assets/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="Assets/js/popper.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="Assets/js/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="Assets/js/axios.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="Assets/js/qs.min.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="Assets/css/bootstrap.min.css" />

		<link rel="stylesheet" type="text/css" href="Assets/css/swiper.min.css" />

		<script src="Assets/js/swiper.min.js" type="text/javascript" charset="utf-8"></script>

		<script src="Assets/js/element-ui.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="Assets/css/element-ui.css" />

		<script src="Assets/js/vuex.js" type="text/javascript" charset="utf-8"></script>

		<script src="Assets/js/tinymce/tinymce.min.js" type="text/javascript" charset="utf-8"></script>

		<script src="Core/Front/jquery.base64.js" type="text/javascript" charset="utf-8"></script>

		<style type="text/css">
			html,
			body {
				height: 100%;
			}

			/* 顶部导航栏 */
			#menu-icon {
				width: 50px;
				height: 50px;
				z-index: 99999999;
			}

			.header-menu-icon {
				display: block;
				width: 26px;
				height: 2px;
				margin-top: -1px;
				right: auto;
				bottom: auto;
				background-color: white;
				position: absolute;
				left: 11px;
				top: 50%;
			}

			.header-menu-icon::before,
			.header-menu-icon::after {
				content: '';
				width: 100%;
				height: 100%;
				background-color: inherit;
				position: absolute;
				left: 0;
			}

			.header-menu-icon::before {
				top: -8px;
			}

			.header-menu-icon::after {
				bottom: -8px;
			}

			.header-nav__close {
				z-index: 601;
				display: block;
				height: 30px;
				width: 30px;
				position: absolute;
				top: 50%;
				right: auto;
				font: 0/0 a;
				text-shadow: none;
				color: transparent;
			}

			.header-nav__close span::before,
			.header-nav__close span::after {
				content: "";
				display: block;
				height: 2px;
				width: 30px;
				background-color: #FFFFFF;
				position: absolute;
				top: 0%;
				left: 7px;
				margin-top: -1px;
			}

			.header-nav__close span::before {
				-webkit-transform: rotate(-45deg);
				-ms-transform: rotate(-45deg);
				transform: rotate(-45deg);
			}

			.header-nav__close span::after {
				-webkit-transform: rotate(45deg);
				-ms-transform: rotate(45deg);
				transform: rotate(45deg);
			}

			#menu li a {
				font-family: Simsun;
				font-weight: bold;
				color: #bbb;
			}

			#menu li:hover a {
				transition-duration: 0.3s;
				color: #fff;
			}

			#h-nav .col {
				text-align: center;
			}

			#h-nav {
				overflow: hidden;
			}

			/* 轮播 */
			#LB::after {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				height: 200px;
				width: 100%;
				background-image: -webkit-gradient(linear, left top, left bottom, color-stop(50%, rgba(0, 0, 0, .5)), to(transparent));
				background-image: linear-gradient(to bottom, rgba(0, 0, 0, .5) 50%, transparent);
			}

			#LB .img-fluid {
				width: 100%;
			}
		</style>

		<script type="text/javascript">
			//公用函数定义
			function sleep(fun, ms) {
				setTimeout(fun, ms);
			}

			function loop(fun, ms) {
				fun();
				setInterval(fun, ms);
			}

			addEventListener(
				"load",
				function() {
					setTimeout(hideURLbar, 0);
				},
				false
			);

			function hideURLbar() {
				window.scrollTo(0, 1);
			}

			function h_nav() {
				if ($(window).width() <= 995) {

					$('#menu-icon').css({
						'display': 'block'
					})


					$('#h-nav').addClass('row').css({
						position: 'relative',
						top: 0,
						display: 'none'
					})

					$('#h-nav').removeClass('row').css({
						'position': 'fixed',
						'paddingTop': '5%'
					})

					$('#menu-icon a').css({
						display: 'block'
					})

					$('#h-nav .col').css({
						'position': 'relative',
						'left': '100%',
						'opacity': '0'
					})

					$('#h-nav').css({
						'backgroundColor': '',
						'height': '',
						'paddingTop': '5%'
					})
				} else {
					$('#h-nav').css({
						'backgroundColor': '',
						'height': '',
						'paddingTop': '',
						'display': ''
					})

					$('#h-nav .col').css({
						'position': 'relative',
						'left': '0%',
						'opacity': '1'
					})
					$('#menu-icon a').css({
						display: 'none'
					})


					$('#h-nav').addClass('row').css({
						position: 'relative',
						top: 0,
						paddingTop: '5px'
					})

					$('#menu-icon').css({
						'display': 'none'
					})
				}
				$('#menu-icon a').addClass('header-menu-icon').removeClass('header-nav__close text-white')
			}

			$(document).ready(function() {
				h_nav()
				$(window).resize(function() {
					h_nav()
				})

				$('#menu-icon').click(function() {
					if ($('#menu-icon a').hasClass('header-menu-icon')) {
						var speed = 300;
						$('#menu-icon a').removeClass('header-menu-icon').addClass('header-nav__close text-white')
						$('#h-nav .col').css({
							'position': 'relative',
							'left': '100%',
							'opacity': '0',
						})

						$('#h-nav').css({
							'backgroundColor': head.h_nav_M_bgColor,
							'height': '100%',
							'display': 'block'
						})

						$('#h-nav .col').each(function() {
							$('#h-nav div').css({
								'display': 'block',
								'height': '50px'
							})
							$(this).animate({
									left: "0%",
									opacity: "1"
								},
								300 + $(this).index() * speed
							);
						});
					} else {
						// $('#h-nav div').css({
						// 	'display': 'none'
						// })
						$('#h-nav').css({
							'backgroundColor': '',
							'height': '',
							'display': 'none',
						})

						$('#h-nav .col').each(function() {
							$('#h-nav div').css({
								'display': 'block'
							})
							$(this).stop(true, true)
							$(this).animate({
									left: "100%",
									opacity: "0"
								},
								300 + $(this).index() * speed
							);
						});

						$('#h-nav .col').css({
							'left': '100%',
							'opacity': '1'
						})
						$('#menu-icon a').addClass('header-menu-icon').removeClass('header-nav__close text-white')
					}
				})
			})
		</script>
	</head>
	<body class="body">

		<div id="head" :style="{height:h_nav_height+'px','background-color':h_nav_bgColor}">
			<div class="container-fluid row" style="padding-top: 10px;position: absolute;z-index: 9999999;width: 100%;top: 0;">
				<div id="header" class="col-lg-4">
					<img :style="{height:h_nav_height+'px',color:h_nav_color,top:'-10px',position:'relative'}" :src="h_nav_logo" alt="LOGO"
					 class="wow flipInX" data-wow-duration="0.5s" data-wow-delay="0.2s">
				</div>

				<div id="menu-icon" style="position: fixed;right: 5%;top: 2px;">
					<a class="header-menu-icon"><span></span></a>
				</div>

				<div id='h-nav' class="col-lg-8 row">
					<div class="col" v-for="(v,k) in headerNav" :key="k">
						<a :href="v.url" :style="{color:h_nav_color,'text-decoration': 'none'}" :target="v.target">{{v.name}}</a>
					</div>
					<div class="col">
						<a href="login.php" :style="{color:h_nav_color,'text-decoration': 'none'}">登录</a>
					</div>
					<div class="col">
						<a href="register.php" :style="{color:h_nav_color,'text-decoration': 'none'}">注册</a>
					</div>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			var head = new Vue({
				el: '#head',
				data() {
					return {
						title: "",
						headerNav: "",
						h_nav_logo: '',
						h_nav_bgColor: "#fff",
						h_nav_height: "60",
						h_nav_color: '#000',
						h_nav_M_bgColor: '#d8cec4'
					}
				},
				watch: {
					headerNav: function() {
						head.$nextTick(function() {
							h_nav()
						})
					}
				},
				mounted() {
					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"baseConfig": ''
					}), ).then(function(res) {
						head.title = res.data.title
						document.title = head.title
						head.h_nav_bgColor = res.data.h_nav_bgColor
						head.h_nav_height = res.data.h_nav_height
						head.h_nav_logo = res.data.h_nav_logo
						head.h_nav_color = res.data.h_nav_color
						head.h_nav_M_bgColor = res.data.h_nav_M_bgColor
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"h_nav": ''
					}), ).then(function(res) {
						head.headerNav = res.data
						console.log(res.data)
					})

				}
			})
		</script>





		<div id="management">

			<el-tabs :tab-position="tabPosition" style="">
				<el-tab-pane label="网站设置">
					<div id="setting" style="">
						<el-form ref="settingform" :model="settingform" label-width="80px" label-position="right" :rules="settingRules"
						 style="max-width: none;">

							<el-row>

								<el-col :md="6" :sm="12" :xs="24" class="text-center">
									网站标题
								</el-col>
								<el-col :md="6" :sm="12" :xs="24" class="text-center">
									<el-form-item label-width="0" label="" prop="title">
										<el-input placeholder="请输入标题" v-model="settingform.title">
										</el-input>
									</el-form-item>
								</el-col>

								<el-col :md="6" :sm="12" :xs="24" class="text-center">
									导航栏高度
								</el-col>
								<el-col :md="6" :sm="12" :xs="24" class="text-center">
									<el-form-item label-width="0" prop="h_nav_height">
										<el-input oninput="value=value.replace(/[^\d]/g,'')" placeholder="请输入高度" v-model="settingform.h_nav_height">
											<template slot="append">px</template>
										</el-input>
									</el-form-item>
								</el-col>

								<el-col :md="6" :sm="6" :xs="12" class="text-center">
									导航栏颜色
								</el-col>
								<el-col :md="6" :sm="6" :xs="12" class="text-center">
									<el-color-picker v-model="settingform.h_nav_bgColor" :predefine="settingform.h_nav_bgColor_Predefine"></el-color-picker>
								</el-col>

								<el-col :md="6" :sm="6" :xs="12" class="text-center">
									导航栏字体颜色
								</el-col>
								<el-col :md="6" :sm="6" :xs="12" class="text-center">
									<el-color-picker v-model="settingform.h_nav_color" :predefine="settingform.h_nav_color_Predefine"></el-color-picker>
								</el-col>

								<el-col :md="12" :sm="12" :xs="12" class="text-center">
									移动端导航栏背景颜色
								</el-col>
								<el-col :md="12" :sm="12" :xs="12" class="text-center">
									<el-color-picker v-model="settingform.h_nav_M_bgColor" :predefine="settingform.h_nav_M_bgColor_Predefine"></el-color-picker>
								</el-col>

								<el-col :span="24">
									<input type="button" value="提交修改" class="btn mx-auto btn-block btn-primary" style="margin: 5px auto;"
									 v-on:click="settingUpdate">
								</el-col>


								<el-col :span="12" class="text-center">
									网站Logo
								</el-col>
								<el-col :span="12" class="text-center">
									<el-upload :show-file-list="false" class="upload-demo" action="./Core/System/upload.php?uploadLogo"
									 :on-success="uploadLogo" :on-error="uploadLogoError" :on-preview="handlePreview" :on-remove="handleRemove"
									 list-type="picture">
										<el-button size="small" type="primary">点击上传</el-button>
										<!-- 										<div slot="tip" class="el-upload__tip">只能上传jpg/png文件，且不超过500kb</div> -->
									</el-upload>
								</el-col>

							</el-row>
						</el-form>
					</div>
				</el-tab-pane>

				<el-tab-pane label="文章管理">
					<div id="channel">
						<el-form ref="channelform" :model="channelform" label-width="80px" label-position="right" :rules="channelRules"
						 style="max-width: none;">
							<el-tabs tab-position="top" style="">
								<el-tab-pane label="信息公开">

									<el-table border :data="channelData.messageData" style="width: 100%">
										<el-table-column prop="date" label="时间">
										</el-table-column>
										<el-table-column prop="title" label="标题">
										</el-table-column>
										<el-table-column label="操作">
											<template slot-scope="scope">
												<el-button size="mini" @click="showContent(scope.row.title,scope.row.content)">
													查看内容
												</el-button>
												<el-button size="mini" type="danger" @click="deleteContent(scope.row.id, scope.row.title)">
													删除
												</el-button>
											</template>
										</el-table-column>
									</el-table>

									<el-pagination @size-change="" @current-change="(v)=>{handleCurrentChange(v,'message')}" :current-page.sync="channelCount.messagePage"
									 :page-size="10" layout="prev, pager, next, jumper" :total="parseInt(channelCount.message)">
									</el-pagination>

								</el-tab-pane>

								<el-tab-pane label="学院要闻">

									<el-table border :data="channelData.newsData" style="width: 100%">
										<el-table-column prop="date" label="时间">
										</el-table-column>
										<el-table-column prop="title" label="标题">
										</el-table-column>
										<el-table-column label="操作">
											<template slot-scope="scope">
												<el-button size="mini" @click="showContent(scope.row.title,scope.row.content)">
													查看内容
												</el-button>
												<el-button size="mini" type="danger" @click="deleteContent(scope.row.id, scope.row.title)">
													删除
												</el-button>
											</template>
										</el-table-column>
									</el-table>

									<el-pagination @size-change="" @current-change="(v)=>{handleCurrentChange(v,'news')}" :current-page.sync="channelCount.newsPage"
									 :page-size="10" layout="prev, pager, next, jumper" :total="parseInt(channelCount.news)">
									</el-pagination>

								</el-tab-pane>

								<el-tab-pane label="通知公告">

									<el-table border :data="channelData.noticeData" style="width: 100%">
										<el-table-column prop="date" label="时间">
										</el-table-column>
										<el-table-column prop="title" label="标题">
										</el-table-column>
										<el-table-column label="操作">
											<template slot-scope="scope">
												<el-button size="mini" @click="showContent(scope.row.title,scope.row.content)">
													查看内容
												</el-button>
												<el-button size="mini" type="danger" @click="deleteContent(scope.row.id, scope.row.title)">
													删除
												</el-button>
											</template>
										</el-table-column>
									</el-table>

									<el-pagination @size-change="" @current-change="(v)=>{handleCurrentChange(v,'notice')}" :current-page.sync="channelCount.noticePage"
									 :page-size="10" layout="prev, pager, next, jumper" :total="parseInt(channelCount.notice)">
									</el-pagination>

								</el-tab-pane>

								<el-tab-pane label="发布文章">
									<el-row>
										<el-col :span="12" class="text-center mx-auto">发布频道</el-col>
										<el-col :span="12" class="text-center mx-auto">
											<el-form-item label="" prop="channel" label-width="0">
												<el-select v-model="channelform.channel" placeholder="请选择发布频道">
													<el-option v-for="data in channelform.channelList" :key="data.channel" :label="data.name" :value="data.channel">
													</el-option>
												</el-select>
											</el-form-item>
										</el-col>
									</el-row>

									<el-form-item label="文章标题" prop="title">
										<el-input v-model="channelform.title"></el-input>
									</el-form-item>

									<el-form-item label="" prop="contain" label-width="0">
										<textarea id="channelContainEditor" rows="" cols="" v-model="channelform.contain">
											</textarea>
									</el-form-item>
									<input value="保存" type="button" id="editor-save" class="btn btn-success btn-block" @click="addContain" />

								</el-tab-pane>
							</el-tabs>
							</el-from>
					</div>
				</el-tab-pane>

				<el-tab-pane label="学生管理">
					<div id="student">
						<el-tabs tab-position="top" style="">
							<el-tab-pane label="学生信息">
								
							<el-table border :data="student.data" style="width: 100%" @sort-change="(x)=>studentSort(x)" @filter-change="(x)=>studentFilter(x)">
	<!-- 							<el-table-column 
									prop="id" 
									label="学号" 
									sortable="custom"
								> -->
								<el-table-column
									prop="id" 
									label="学号" 
								>
								</el-table-column>
								<el-table-column
									prop="name" label="姓名"
								>
								</el-table-column>
	<!-- 							<el-table-column prop="sex" label="性别">
								</el-table-column> -->
								<el-table-column
									prop="sex" label="性别"
									:column-key="'sex'"
									:filters="student.sexFilter"
								>
								</el-table-column>
								<el-table-column prop="both" label="出生日期">
								</el-table-column>
								<el-table-column prop="phone" label="手机号码">
								</el-table-column>
								<el-table-column prop="grade" label="年级"
									:column-key="'grade'"
									:filters="student.gradeFilter"
								>
								</el-table-column>
								<el-table-column prop="years" label="学制">
								</el-table-column>
								<el-table-column prop="department" label="系"
									:column-key="'department'"
									:filters="student.departmentFilter"
								>
								</el-table-column>
								<el-table-column prop="major" label="专业"
									:column-key="'major'"
									:filters="student.majorFilter"
								>
								</el-table-column>
								<el-table-column prop="class" label="班级">
								</el-table-column>
								<el-table-column prop="seat" label="座号">
								</el-table-column>
								<el-table-column label="账号状态">
									<template slot-scope="scope">
										<span v-if="scope.row.active == 0" class="text-danger">未激活</span>
										<span v-else class="text-success">已激活</span>
									</template>
								</el-table-column>
								<el-table-column prop="idCard" label="身份证">
								</el-table-column>
								<el-table-column label="操作">
									<template slot-scope="scope">
										<el-button size="mini" @click="">
											查看内容
										</el-button>
										<el-button size="mini" type="danger" @click="deleteStudent(scope.row.id)">
											删除
										</el-button>
									</template>
								</el-table-column>
							</el-table>

							<el-pagination @size-change="" @current-change="(v)=>{studentCurrentChange(v)}" :current-page.sync="student.page"
							 :page-size="10" layout="prev, pager, next, jumper" :total="parseInt(student.count)">
							</el-pagination>
						
							</el-tab-pane>
							
							<el-tab-pane label="添加学生">
								<el-form ref="addStudentForm" :model="addStudent" label-width="80px" label-position="right" :rules="addStudentRules" style="max-width: none;">
								
									<el-form-item label="学制" prop="years">
										<el-input placeholder="请输入学制" v-model="addStudent.years" oninput="value=value.replace(/[^1-9]/g,'')">
											<template slot="append">年</template>
										</el-input>
									</el-form-item>
								
									<el-form-item label="学系" prop="department">
										<el-select v-model="addStudent.department" placeholder="请选择所在学系">
											<el-option v-for="data in addStudent.departmentList" :key="data.id" :label="data.id +' '+ data.departmentName" :value="data.id"></el-option>
										</el-select>
									</el-form-item>
								
									<el-form-item label="专业" prop="major">
										<el-select v-model="addStudent.major" placeholder="请选择所在专业" :disabled="addStudent.majorDisabled">
											<el-option v-for="data in addStudent.majorList" :key="data.id" :label="data.id + ' ' + data.name" :value="data.id"></el-option>
										</el-select>
									</el-form-item>
								
									<el-form-item label="年级" prop="grade">
										<el-select v-model="addStudent.grade" placeholder="请选择所在年级" :disabled="addStudent.gradeDisabled">
											<el-option v-for="data in addStudent.gradeList" :key="data.grade" :label="data.grade + ' 级'" :value="data.grade"></el-option>
										</el-select>
									</el-form-item>
								
									<el-form-item label="班次" prop="Class">
										<el-select v-model="addStudent.Class" placeholder="请选择所在班次" :disabled="addStudent.classDisabled">
											<el-option v-for="data in addStudent.classList" :key="data.class" :label="data.class + ' 班'" :value="data.class"></el-option>
										</el-select>
									</el-form-item>
								
									<el-form-item label="学号" prop="seat">
										 <el-input placeholder="请输入内容" v-model="addStudent.seat" v-if="!addStudent.seatDisabled" oninput="value=value.replace(/[^\d]/g,'')">
										   <template slot="prepend">{{addStudent.grade + addStudent.years + addStudent.department + addStudent.major + addStudent.Class}}</template>
										 </el-input>
										 
										 <p v-else class="text-danger"> 信息填写完整后自动生成 </p>
									</el-form-item>
								
									<el-form-item label="姓名" prop="name">
										<el-input v-model="addStudent.name" placeholder="请输入姓名"></el-input>
									</el-form-item>
									
									<el-form-item label="身份证" prop="idCard">
										<el-input v-model="addStudent.idCard" placeholder="请填写身份证号"></el-input>
									</el-form-item>
									
									<el-form-item label="性别" prop="sex">
										<el-select v-model="addStudent.sex" placeholder="根据身份证号自动选择">
											<el-option :label="'男'" :value="'男'"></el-option>
											<el-option :label="'女'" :value="'女'"></el-option>
										</el-select>
									</el-form-item>
									
									<el-form-item label="出生日期" prop="both">
										<el-date-picker
											  v-model="addStudent.both"
											  type="date"
											  value-format="yyyy/MM/dd"
											  placeholder="根据身份证号自动填写">
										</el-date-picker>
									</el-form-item>
								
									<el-form-item label="手机号码" prop="phone">
										<el-input v-model="addStudent.phone" placeholder="请输入手机号码"></el-input>
									</el-form-item>
								
									<div>
										<el-button type="primary" class="mx-auto text-center btn-block" @click="addStudentSubmit" >添加学生</el-button>
									</div>

								
								</el-form>
							</el-tab-pane>
						</el-tabs>
					</div>
				</el-tab-pane>

				<el-tab-pane label="教工管理">
					<div id="teacher">
						<el-table border :data="teacher.data" style="width: 100%">
							<el-table-column prop="id" label="教工号">
							</el-table-column>
							<el-table-column prop="name" label="姓名">
							</el-table-column>
							<el-table-column prop="sex" label="性别">
							</el-table-column>
							<el-table-column prop="both" label="出生日期">
							</el-table-column>
							<el-table-column prop="phone" label="手机号码">
							</el-table-column>
							<el-table-column prop="departmentName" label="系">
							</el-table-column>
							<el-table-column label="账号状态">
								<template slot-scope="scope">
									<span v-if="scope.row.active == 0" class="text-danger">未激活</span>
									<span v-else class="text-success">已激活</span>
								</template>
							</el-table-column>
							<el-table-column prop="idCard" label="身份证">
							</el-table-column>
							<el-table-column label="操作">
								<template slot-scope="scope">
									<el-button size="mini" @click="">
										查看内容
									</el-button>
									<el-button size="mini" type="danger" @click="">
										删除
									</el-button>
								</template>
							</el-table-column>
						</el-table>
					
						<el-pagination @size-change="" @current-change="(v)=>{teacherCurrentChange(v)}" :current-page.sync="teacher.page"
						 :page-size="10" layout="prev, pager, next, jumper" :total="parseInt(teacher.count)">
						</el-pagination>
					</div>
				</el-tab-pane>
				
				<el-tab-pane label="管理员信息">
					<div id="admin">
						<el-table border :data="admin.data" style="width: 100%">
							<el-table-column prop="id" label="教工号">
							</el-table-column>
							<el-table-column prop="name" label="姓名">
							</el-table-column>
							<el-table-column prop="sex" label="性别">
							</el-table-column>
							<el-table-column prop="both" label="出生日期">
							</el-table-column>
							<el-table-column prop="phone" label="手机号码">
							</el-table-column>
							<el-table-column prop="departmentName" label="系">
							</el-table-column>
							<el-table-column label="账号状态">
								<template slot-scope="scope">
									<span v-if="scope.row.active == 0" class="text-danger">未激活</span>
									<span v-else class="text-success">已激活</span>
								</template>
							</el-table-column>
							<el-table-column prop="idCard" label="身份证">
							</el-table-column>
							<el-table-column label="操作">
								<template slot-scope="scope">
									<el-button size="mini" @click="">
										查看内容
									</el-button>
									<el-button size="mini" type="danger" @click="">
										删除
									</el-button>
								</template>
							</el-table-column>
						</el-table>
					
						<el-pagination @size-change="" @current-change="(v)=>{amdinCurrentChange(v)}" :current-page.sync="admin.page"
						 :page-size="10" layout="prev, pager, next, jumper" :total="parseInt(admin.count)">
						</el-pagination>
					</div>
				</el-tab-pane>

			</el-tabs>

		</div>

		<script type="text/javascript">
			var channelUpload = function(blobInfo, succFun, failFun) {
				var xhr, formData;
				var file = blobInfo.blob(); //转化为易于理解的file对象
				xhr = new XMLHttpRequest();
				xhr.withCredentials = false;
				xhr.open('POST', './Core/System/upload.php');

				if (!management.channelform.channel) {
					failFun('请先选择频道再上传图片');
					return;
				}

				xhr.onload = function() {
					var json;
					if (xhr.status != 200) {
						failFun('HTTP Error: ' + xhr.status);
						return;
					}
					json = JSON.parse(xhr.responseText);
					if (!json || typeof json.location != 'string') {
						failFun('Invalid JSON: ' + xhr.responseText);
						return;
					}
					succFun(json.location);
				};
				formData = new FormData();
				formData.append('file', file, file.name); //此处与源文档不一样

				formData.append('channel', management.channelform.channel); // 频道参数
				xhr.send(formData);
			}

			$(document).ready(function() {
				tinymce.init({
					selector: '#channelContainEditor',
					language: 'zh_CN',
					skin: 'oxide',
					statusbar: true,
					plugins: 'image code insertdatetime indent2em preview autolink link quickbars autoresize hr',
					branding: false,
					menubar: false,
					toolbar: 'undo redo preview | cut copy paste | alignleft aligncenter alignright indent2em bold italic | underline strikethrough hr | fontsizeselect forecolor backcolor styleselect removeformat link image insertdatetime code',
					insertdatetime_formats: ["%Y-%m-%d %H:%M:%S"],
					default_link_target: "_blank",
					link_context_toolbar: true,
					min_height: 350,
					quickbars_insert_toolbar: 'cut copy paste | quickimage bold italic',
					images_upload_handler: channelUpload
					// images_upload_url: './upload.php',
				})

				// var editor = HE.getEditor('editor',{
				// 	uploadPhoto:true,
				// 	uploadPhotoHandler:'./upload.php'
				// });
			})

			var resetWindow = function() {
				$('#setting').css({
					'min-height': $(window).height() - $('#head').height() - $('#foot').height()
				})
				$('#channel').css({
					'min-height': $(window).height() - $('#head').height() - $('#foot').height()
				})
				$('#student').css({
					'min-height': $(window).height() - $('#head').height() - $('#foot').height()
				})
				$('#teacher').css({
					'min-height': $(window).height() - $('#head').height() - $('#foot').height()
				})
				$('#admin').css({
					'min-height': $(window).height() - $('#head').height() - $('#foot').height()
				})
				
				if ($(window).width() <= 995) {
					management.tabPosition = 'top'
					$('#management').css({
						'margin': '0 10px',
						'margin-top': '5px'
					})
				} else {
					management.tabPosition = 'left'
					$('#management').css({
						'margin': '0 5px',
						'margin-top': '5px'
					})
				}
			}
			$(document).ready(function() {
				resetWindow()
			})
			$(window).resize(function() {
				resetWindow()
			})

			var management = new Vue({
				el: '#management',
				watch: {
					department(n, o) {
						console.log(n)
						
						if (n != '') {
							management.addStudent.majorDisabled = false
							axios.post('/Core/Global/frontInit.php', Qs.stringify({
								"majorList": n
							}), ).then(function(res) {
								management.addStudent.majorList = res.data
								console.log(res.data)
							})
							management.addStudent.major = ''
							management.addStudent.grade = ''
							management.addStudent.Class = ''
						} else {
							if (management.addStudent.majorDisabled == false)
								management.addStudent.majorDisabled = true
							else {
								management.addStudent.major = ''
								management.addStudent.grade = ''
								management.addStudent.Class = ''
								axios.post('/Core/Global/frontInit.php', Qs.stringify({
									"majorList": n
								}), ).then(function(res) {
									management.addStudent.majorList = res.data
									console.log(res.data)
								})
							}
						}
						
						// management.$refs['addStudentForm'].validate((v) => {})
					},
					major(n,o){
						if (n != '') {
							management.addStudent.gradeDisabled = false
							axios.post('/Core/Global/frontInit.php', Qs.stringify({
								"gradeList": '',
								"department": management.addStudent.department,
								"major": n,
							}), ).then(function(res) {
								management.addStudent.gradeList = res.data
								console.log(res.data)
							})
							management.addStudent.grade = ''
							management.addStudent.Class = ''
						} else {
							if (management.addStudent.gradeDisabled == false)
								management.addStudent.gradeDisabled = true
							else {
								management.addStudent.grade = ''
								management.addStudent.Class = ''
								axios.post('/Core/Global/frontInit.php', Qs.stringify({
									"gradeList": '',
									"department": management.addStudent.department,
									"major": n,
								}), ).then(function(res) {
									management.addStudent.gradeList = res.data
									console.log(res.data)
								})
						
							}
						}
					},
					grade(n,o){
						if (n != '') {
							management.addStudent.classDisabled = false
							axios.post('/Core/Global/frontInit.php', Qs.stringify({
								"classList": '',
								"department": management.addStudent.department,
								"major": management.addStudent.major,
								"grade": n
							}), ).then(function(res) {
								management.addStudent.classList = res.data
								console.log(res.data)
							})
							management.addStudent.Class = ''
						} else {
							if (management.addStudent.classDisabled == false)
								management.addStudent.classDisabled = true
							else {
								management.addStudent.Class = ''
								axios.post('/Core/Global/frontInit.php', Qs.stringify({
									"classList": '',
									"department": management.addStudent.department,
									"major": management.addStudent.major,
									"grade": n
								}), ).then(function(res) {
									management.addStudent.classList = res.data
									console.log(res.data)
								})
							}
						}
					},
					Class(n,o){
						if (n != '') {
							management.addStudent.seatDisabled = false
							management.addStudent.seat = ''
							axios.post('/Core/Global/frontInit.php', Qs.stringify({
								"getMaxSeat": '',
								"department": management.addStudent.department,
								"major": management.addStudent.major,
								"grade": management.addStudent.grade,
								"class": n,
							}), ).then(function(res) {
								if(res.data["seat"] < 10)
								{
									res.data["seat"] = '0' + res.data["seat"]
								}
								management.addStudent.seat = res.data["seat"]
								console.log(res.data)
							})
						} else {
							if (management.addStudent.seatDisabled == false)
								management.addStudent.seatDisabled = true
							else {
								management.addStudent.seat = ''
								axios.post('/Core/Global/frontInit.php', Qs.stringify({
									"getMaxSeat": '',
									"department": management.addStudent.department,
									"major": management.addStudent.major,
									"grade": management.addStudent.grade,
									"class": n,
								}), ).then(function(res) {
									if(res.data["seat"] < 10)
									{
										res.data["seat"] = '0' + res.data["seat"]
									}
									management.addStudent.seat = res.data["seat"]
									console.log(res.data)
								})
							}
						}
					},
					seat(n,o){
						management.addStudent.id = management.addStudent.grade + management.addStudent.years + management.addStudent.department + management.addStudent.major + management.addStudent.Class + n
					},
					years(n,o){
						management.addStudent.id = management.addStudent.grade + n + management.addStudent.department + management.addStudent.major + management.addStudent.Class + management.addStudent.seat
					},
					idCard(n,o){
						
					}
				},
				computed: {
					years(){
						return this.addStudent.years
					},
					department() {
						return this.addStudent.department
					},
					major(){
						return this.addStudent.major
					},
					grade(){
						return this.addStudent.grade
					},
					Class(){
						return this.addStudent.Class
					},
					seat(){
						return this.addStudent.seat
					},
					idCard(){
						return this.addStudent.idCard
					}
				},
				data() {
					var validator_h_nav_height = (rule, value, callback) => {
						if (!value) {
							return callback(new Error('导航栏高度不能为空'))
						} else if (value < 50 || value > 100) {
							return callback(new Error('导航栏高度只能为 >=50 或 <=100'))
						} else {
							return callback()
						}
					}
					
					var id18 = /^([1-6][1-9]|50)\d{4}(18|19|20)\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/
					var id15 = /^([1-6][1-9]|50)\d{4}\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}$/
					var validatoridCard = (rule, value, callback) => {
						if (!value) {
							return callback(new Error('请输入身份证号'))
						} else if (!(id18.test(value) || id15.test(value))) {
							return callback(new Error('身份证格式不正确'))
						} else {
							management.addStudent.idCard = management.addStudent.idCard.toUpperCase()
							if(management.addStudent.idCard.length == 18)
							{
								management.addStudent.both = management.addStudent.idCard.substring(6,10) + '/' 
								+ management.addStudent.idCard.substring(10,12) + '/' 
								+ management.addStudent.idCard.substring(12,14)
								
								if(management.addStudent.idCard.substring(16,17) % 2 == 1)
								{
									management.addStudent.sex = '男'
								}
								else{
									management.addStudent.sex = '女'
								}
							}
							else{
								management.addStudent.both = '19' + management.addStudent.idCard.substring(6,8) + '/'
								+ management.addStudent.idCard.substring(8,10) + '/' 
								+ management.addStudent.idCard.substring(10,12)
								
								if(management.addStudent.idCard.substring(14,15) % 2 == 1)
								{
									management.addStudent.sex = '男'
								}
								else{
									management.addStudent.sex = '女'
								}
							}
							return callback()
						}
					}

					return {
						// openeds: ['1'],
						// menuActive: "1-1",
						tabPosition: 'left',

						addStudent:{
							department: '',
							departmentList: '',
							years:'3',
							major: '',
							majorList: '',
							grade: '',
							gradeList: "",
							Class: '',
							classList: '',
							seat:'',
							id:'',
							name:'',
							sex:'',
							both:'',
							phone:'',
							idCard:'',
							
							majorDisabled: true,
							gradeDisabled: true,
							classDisabled: true,
							seatDisabled: true,
						},
						addStudentRules: {
							department: [{
								required: true,
								message: '请选择学系',
								trigger: 'blur'
							}, ],
							years: [{
								required: true,
								message: '请输入学制',
								trigger: 'blur'
							}, { max:1, message:'请输入不超过1个字符',trigger:['blur', 'change']}],
							major: [{
								required: true,
								message: '请选择所在专业',
								trigger: 'blur'
							}, ],
							grade: [{
								required: true,
								message: '请选择所在年级',
								trigger: 'blur'
							}, ],
							Class: [{
								required: true,
								message: '请选择所在班级',
								trigger: 'blur'
							}, ],
							name: [{
									required: true,
									message: '请输入姓名',
									trigger: 'blur'
								},
								{
									min: 2,
									max: 5,
									message: '请输入正确的姓名',
									trigger: 'blur'
								},
							],
							phone: [{
									required: true,
									message: '请输入手机号码',
									trigger: 'blur'
								},
								{
									min: 11,
									max: 11,
									message: '请输入正确的手机号码',
									trigger: 'blur'
								},
							],
							idCard: [{
								required: true,
								validator: validatoridCard,
								trigger: "blur"
							}],
							sex: [{
								required: true,
								message: '请选择性别',
								trigger:['blur', 'change']
							}, ],
							both: [{
								required: true,
								message: '请填写出生日期',
								trigger:['blur', 'change']
							}, ],
						},

						student: {
							data: [''],
							sex:'',
							grade:'',
							department:'',
							major:'',
							page: 1,
							count: 0,
							
							sexFilter:[{'text':'男',value:'男'},{'text':'女',value:'女'}],
							gradeFilter:[],
							departmentFilter:[],
							majorFilter:[],
						},
						
						teacher: {
							data: [''],
							page: 1,
							count: 0,
						},
						
						admin: {
							data: [''],
							page: 1,
							count: 0,
						},

						channelData: {
							messageData: [''],
							newsData: [''],
							noticeData: [''],
						},

						channelCount: {
							message: 0,
							messagePage: 1,

							news: 0,
							newsPage: 1,

							notice: 0,
							noticePage: 1,

						},

						settingform: {
							title: '',
							h_nav_bgColor: '',
							h_nav_bgColor_Predefine: [''],

							h_nav_color: '',
							h_nav_color_Predefine: [''],

							h_nav_height: '',

							h_nav_logo: '',

							h_nav_M_bgColor: '',
							h_nav_M_bgColor_Predefine: [''],

						},
						settingRules: {
							h_nav_height: [{
									required: true,
									message: '导航栏高度不能为空',
									trigger: ['blur', 'change']
								},
								{
									validator: validator_h_nav_height,
									trigger: ['blur', 'change']
								}
							]
						},

						channelform: {
							channel: '',
							channelList: '',
							title: '',
							contain: '',
						},
						channelRules: {
							channel: [{
								required: true,
								message: '请选择发布频道',
								trigger: ['blur', 'change']
							}],
							title: [{
								required: true,
								message: '请输入文章标题',
								trigger: ['blur', 'change']
							}]
						}

					}
				},
				mounted() {

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"departmentList": ''
					}), ).then(function(res) {
						management.addStudent.departmentList = res.data
						console.log(res.data)
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getDepartment": '',
					}), ).then(function(res) {
						management.student.departmentFilter = res.data
						
						axios.post('/Core/Global/frontInit.php', Qs.stringify({
							"getMajor": '',
						}), ).then(function(res) {
							management.student.majorFilter = res.data
						})
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getGrade": '',
					}), ).then(function(res) {
						management.student.gradeFilter = res.data
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getAdminList": '',
						'page': '1',
						'num': '10'
					}), ).then(function(res) {
						management.admin.data = res.data
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getAdminListCount": ''
					}), ).then(function(res) {
						management.admin.count = res.data.num
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getTeacherList": '',
						'page': '1',
						'num': '10'
					}), ).then(function(res) {
						management.teacher.data = res.data
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getTeacherListCount": ''
					}), ).then(function(res) {
						management.teacher.count = res.data.num
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getStudentList": '',
						'page': '1',
						'num': '10'
					}), ).then(function(res) {
						management.student.data = res.data
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getStudentListCount": ''
					}), ).then(function(res) {
						management.student.count = res.data.num
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getChannelTitle": 'message',
						'page': '1',
						'num': '10'
					}), ).then(function(res) {
						management.channelData.messageData = res.data
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getChannelTitle": 'news',
						'page': '1',
						'num': '10'
					}), ).then(function(res) {
						management.channelData.newsData = res.data
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getChannelTitle": 'notice',
						'page': '1',
						'num': '10'
					}), ).then(function(res) {
						management.channelData.noticeData = res.data
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getChannelCount": 'message'
					}), ).then(function(res) {
						management.channelCount.message = res.data.num
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getChannelCount": 'news'
					}), ).then(function(res) {
						management.channelCount.news = res.data.num
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getChannelCount": 'notice'
					}), ).then(function(res) {
						management.channelCount.notice = res.data.num
					})


					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"getChannel": ''
					}), ).then(function(res) {
						management.channelform.channelList = res.data
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"baseConfig": ''
					}), ).then(function(res) {
						management.settingform.title = res.data.title

						management.settingform.h_nav_bgColor = res.data.h_nav_bgColor
						management.settingform.h_nav_bgColor_Predefine = [res.data.h_nav_bgColor]

						management.settingform.h_nav_height = res.data.h_nav_height


						management.settingform.h_nav_logo = res.data.h_nav_logo

						management.settingform.h_nav_color = res.data.h_nav_color
						management.settingform.h_nav_color_Predefine = [res.data.h_nav_color]

						management.settingform.h_nav_M_bgColor = res.data.h_nav_M_bgColor
						management.settingform.h_nav_M_bgColor_Predefine = [res.data.h_nav_M_bgColor]
					})

					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"h_nav": ''
					}), ).then(function(res) {
						management.settingform.headerNav = res.data
						console.log(res.data)
					})
				},
				methods: {
					deleteStudent(id){
						console.log(id)
						management.$confirm('此操作将删除该学生, 是否继续?', '提示', {
						          confirmButtonText: '确定',
						          cancelButtonText: '取消',
						          type: 'warning'
						        }).then(() => {
									axios.post('/Core/Global/frontInit.php', Qs.stringify({
										"delStudent": id,
									}), ).then(function(res) {
										if ('error' in res.data) {
											management.$alert(res.data.error, '错误', {
												confirmButtonText: '确定',
												type: 'error',
												center: true,
												callback: action => {}
											})
										} else if ('success' in res.data) {
											management.$alert(res.data.success, '操作成功', {
												confirmButtonText: '确定',
												type: 'success',
												center: true,
												callback: action => {
													axios.post('/Core/Global/frontInit.php', Qs.stringify({
														"getStudentList": '',
														'page': management.student.page,
														'num': '10',
														'sex':JSON.stringify(management.student.sex),
														'grade':JSON.stringify(management.student.grade),
														'department':JSON.stringify(management.student.department),
														'major':JSON.stringify(management.student.major),
													}), ).then(function(res) {
														management.student.data = res.data
													})
													axios.post('/Core/Global/frontInit.php', Qs.stringify({
														"getStudentListCount": '',
														'sex':JSON.stringify(management.student.sex),
														'grade':JSON.stringify(management.student.grade),
														'department':JSON.stringify(management.student.department),
														'major':JSON.stringify(management.student.major),
													}), ).then(function(res) {
														management.student.count = res.data.num
													})
												}
											})
										}
									})
						        }).catch(() => {
						          management.$message({
						            type: 'info',
						            message: '已取消删除'
						          });          
						        });
					},
					addStudentSubmit(){
						management.$refs['addStudentForm'].validate((valid) => {
								if (valid) {
									axios.post('/Core/Global/frontInit.php', Qs.stringify({
										"addStudent": '',
										'name':management.addStudent.name,
										'sex':management.addStudent.sex,
										'both':management.addStudent.both,
										'phone':management.addStudent.phone,
										'grade': management.addStudent.grade,
										'years':management.addStudent.years,
										'department': management.addStudent.department,
										'major': management.addStudent.major,
										'class': management.addStudent.Class,
										'seat':management.addStudent.seat,
										'idCard': management.addStudent.idCard
									}), ).then(function(res) {
										console.log(res.data)
										
										if('error' in res.data)
										{
											management.$alert(res.data.error, '错误', {
												confirmButtonText: '确定',
												type: 'error',
												center: true,
												callback: action => {
												}
											})
										}
										else if('success' in res.data)
										{
											management.$alert('学生添加成功', '操作成功完成', {
												confirmButtonText: '确定',
												type: 'success',
												center: true,
												callback: action => {
													management.addStudent.name = ''
													management.addStudent.idCard = ''
													management.addStudent.both = ''
													management.addStudent.phone = ''
													management.addStudent.sex = ''
													management.addStudent.seat = ''
													axios.post('/Core/Global/frontInit.php', Qs.stringify({
														"getMaxSeat": '',
														"department": management.addStudent.department,
														"major": management.addStudent.major,
														"grade": management.addStudent.grade,
														"class": management.addStudent.Class,
													}), ).then(function(res) {
														if(res.data["seat"] < 10)
														{
															res.data["seat"] = '0' + res.data["seat"]
														}
														management.addStudent.seat = res.data["seat"]
													})
												}
											})
										}
									})
								} else {
									management.$alert('信息填写有误，请检查信息是否填写完整', '错误', {
										confirmButtonText: '确定',
										type: 'error',
										center: true,
										callback: action => {
						
										}
									})
								}
							})
					},
					studentFilter(val){
						if('sex' in val)
						{
							management.student.sex = val['sex']
						}
						if('grade' in val)
						{
							management.student.grade = val['grade']
						}
						if('department' in val)
						{
							management.student.department = val['department']
							
							axios.post('/Core/Global/frontInit.php', Qs.stringify({
								"getMajor": '',
								'department':JSON.stringify(val['department'])
							}), ).then(function(res) {
								management.student.majorFilter = res.data
							})
						}
						if('major' in val)
						{
							management.student.major = val['major']
						}
						management.student.page = 1
						this.studentCurrentChange(management.student.page)
						console.log(val)
					},
					studentCurrentChange(val) {
						axios.post('/Core/Global/frontInit.php', Qs.stringify({
							"getStudentList": '',
							'page': val,
							'num': '10',
							'sex':JSON.stringify(management.student.sex),
							'grade':JSON.stringify(management.student.grade),
							'department':JSON.stringify(management.student.department),
							'major':JSON.stringify(management.student.major),
						}), ).then(function(res) {
							management.student.data = res.data
						})
						axios.post('/Core/Global/frontInit.php', Qs.stringify({
							"getStudentListCount": '',
							'sex':JSON.stringify(management.student.sex),
							'grade':JSON.stringify(management.student.grade),
							'department':JSON.stringify(management.student.department),
							'major':JSON.stringify(management.student.major),
						}), ).then(function(res) {
							management.student.count = res.data.num
						})
					},
					adminCurrentChange(val) {
						axios.post('/Core/Global/frontInit.php', Qs.stringify({
							"getAdminList": '',
							'page': val,
							'num': '10',
						}), ).then(function(res) {
							management.teacher.data = res.data
						})
					},
					teacherCurrentChange(val) {
						axios.post('/Core/Global/frontInit.php', Qs.stringify({
							"getTeacherList": '',
							'page': val,
							'num': '10'
						}), ).then(function(res) {
							management.teacher.data = res.data
						})
					},
					handleCurrentChange(val, channel) {
						axios.post('/Core/Global/frontInit.php', Qs.stringify({
							"getChannelTitle": channel,
							'page': val,
							'num': '10'
						}), ).then(function(res) {
							management.channelData[channel + 'Data'] = res.data
						})
					},
					showContent(title, content) {
						if ($(window).width() < 995) {
							$('#head').hide()
						}
						this.$alert(content, '查看文章:' + title, {
							customClass: 'showChannelData',
							dangerouslyUseHTMLString: true,
							callback: action => {},
							center: true,
							confirmButtonText: '关闭',
							closeOnClickModal: true,
							callback: action => {
								$('#head').show()
							}
						});
					},
					deleteContent(id, title) {
						axios.post('/Core/Global/frontInit.php', Qs.stringify({
							"deleteChannelContent": '',
							'id': id,
							'title': title,
						}), ).then(function(res) {
							if ('error' in res.data) {
								management.$alert(res.data.error, '错误', {
									confirmButtonText: '确定',
									type: 'error',
									center: true,
									callback: action => {}
								})
							} else if ('success' in res.data) {
								management.$alert(res.data.success, '操作成功', {
									confirmButtonText: '确定',
									type: 'success',
									center: true,
									callback: action => {
										// location.reload()
										loadChannelData()
									}
								})
							}
						})
					},
					handleRemove(file, fileList) {
						console.log(file, fileList);
					},
					handlePreview(file) {
						console.log(file);
					},
					uploadLogo(response, file, fileList) {
						management.$alert('Logo上传成功', '上传成功', {
							confirmButtonText: '确定',
							type: 'success',
							center: true,
							callback: action => {}
						})
					},
					uploadLogoError(err, file, fileList) {
						management.$alert('Logo上传失败', '上传失败', {
							confirmButtonText: '确定',
							type: 'error',
							center: true,
							callback: action => {}
						})
					},
					settingUpdate() {
						management.$refs['settingform'].validate((valid) => {
							if (valid) {
								axios.post('/Core/Global/frontInit.php', Qs.stringify({
									'settingUpdate': '',
									'title': management.settingform.title,
									'h_nav_bgColor': management.settingform.h_nav_bgColor,
									'h_nav_height': management.settingform.h_nav_height,
									'h_nav_color': management.settingform.h_nav_color,
									'h_nav_M_bgColor': management.settingform.h_nav_M_bgColor,
								}), ).then(function(res) {
									console.log(res.data)

									if ('error' in res.data) {
										management.$alert(res.data.error, '错误', {
											confirmButtonText: '确定',
											type: 'error',
											center: true,
											callback: action => {}
										})
									} else if ('success' in res.data) {
										management.$alert(res.data.success, '操作成功', {
											confirmButtonText: '确定',
											type: 'success',
											center: true,
											callback: action => {
												location.reload()
											}
										})
									}

								})
							} else {

							}
						})
					},
					addContain() {
						tinyMCE.editors['channelContainEditor'].save();
						management.channelform.contain = $.base64.encode($('#channelContainEditor').val())

						if (!management.channelform.contain) {
							management.$alert('文章内容不能为空', '错误', {
								confirmButtonText: '返回',
								type: 'error',
								center: true,
								callback: action => {}
							})
						} else {
							management.$refs['channelform'].validate((v) => {
								if (v) {
									axios.post('/Core/Global/frontInit.php', Qs.stringify({
										"channelAddContain": '',
										'channel': management.channelform.channel,
										'title': management.channelform.title,
										'contain': management.channelform.contain
									}), ).then(function(res) {
										if ('error' in res.data) {
											management.$alert(res.data.error, '错误', {
												confirmButtonText: '确定',
												type: 'error',
												center: true,
												callback: action => {}
											})
										} else if ('success' in res.data) {
											management.$alert(res.data.success, '操作成功', {
												confirmButtonText: '确定',
												type: 'success',
												center: true,
												callback: action => {
													// location.reload()
													management.channelform.channel = '',
														management.channelform.title = '',
														management.channelform.title = '',
														management.channelform.contain = '',
														$('#channelContainEditor').val('')
													tinyMCE.editors['channelContainEditor'].setContent('')
													loadChannelData()
												}
											})
										}
									})

								}
							})

						}
					}

				}
			})

			var loadChannelData = function() {
				axios.post('/Core/Global/frontInit.php', Qs.stringify({
					"getChannelTitle": 'message',
					'page': management.channelCount.messagePage,
					'num': '10'
				}), ).then(function(res) {
					management.channelData.messageData = res.data
				})

				axios.post('/Core/Global/frontInit.php', Qs.stringify({
					"getChannelTitle": 'news',
					'page': management.channelCount.newsPage,
					'num': '10'
				}), ).then(function(res) {
					management.channelData.newsData = res.data
				})

				axios.post('/Core/Global/frontInit.php', Qs.stringify({
					"getChannelTitle": 'notice',
					'page': management.channelCount.noticePage,
					'num': '10'
				}), ).then(function(res) {
					management.channelData.noticeData = res.data
				})

				axios.post('/Core/Global/frontInit.php', Qs.stringify({
					"getChannelCount": 'message'
				}), ).then(function(res) {
					management.channelCount.message = res.data.num
				})

				axios.post('/Core/Global/frontInit.php', Qs.stringify({
					"getChannelCount": 'news'
				}), ).then(function(res) {
					management.channelCount.news = res.data.num
				})

				axios.post('/Core/Global/frontInit.php', Qs.stringify({
					"getChannelCount": 'notice'
				}), ).then(function(res) {
					management.channelCount.notice = res.data.num
				})

			}
		</script>
		<style type="text/css">
			.showChannelData {
				width: 100%;
			}
		</style>



		<div id="foot">
			<el-backtop :bottom="100" :right="20">
				<div style="{
					        background-color: #f2f5f6;
					        box-shadow: 0 0 6px rgba(0,0,0, .12);
					        text-align: center;
					        color: #1989fa;
							width: 100%;
							height: 100%;
							border-radius: 50%;
							line-height: 180%;
					      }">
					▲
				</div>
			</el-backtop>

			<el-row :style="{'background-color':foot_bgColor,'color':foot_color}" style="">
				<el-col :md="24" class="text-center">
					Copyright © {{siteName}} All Rights Reserved
				</el-col>

				<el-col :md="24" v-if="foot_extend">
					<div v-html="foot_extend_contain" class="row" style="padding: 0;margin: 0;"></div>
				</el-col>

			</el-row>
		</div>

		<script type="text/javascript">
			var foot = new Vue({
				el: '#foot',
				data() {
					return {
						siteName: '',
						foot_bgColor: '#000',
						foot_color: "#fff",
						foot_extend: false,
						foot_extend_contain: '',
					}
				},
				mounted() {
					axios.post('/Core/Global/frontInit.php', Qs.stringify({
						"baseConfig": ''
					}), ).then(function(res) {
						foot.siteName = res.data.title
						foot.foot_bgColor = res.data.foot_bgColor
						foot.foot_color = res.data.foot_color
						foot.foot_extend = res.data.foot_extend == 'true'
						if (foot.foot_extend) {
							foot.foot_extend_contain = res.data.foot_extend_contain
						}
					})
				}
			})
		</script>
	</body>
</html>
